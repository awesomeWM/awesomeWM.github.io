commit 20dfff373dbf6f9055f9d40ab9f294cf9f38cf0f
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Mon Jun 26 03:30:13 2017 -0400

    release: Change the codename

commit 9724850fb8313cf2d6ab3ccce2aab96ad8d99b87
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Mon Jun 26 03:28:49 2017 -0400

    release: Update the NEWS

commit 5ddbfe1aa765bc7b8b66d785d7fb300aa3909d9a
Author: morethanoneanimal <morethanoneanimal@users.noreply.github.com>
Date:   Fri Jul 14 12:32:21 2017 -0700

    Tests for awful.prompt (#1916)

commit fb18a1d1595f84786aa876cf316852fbd162de9b
Author: Daniel Hahler <github@thequod.de>
Date:   Sun Jul 9 22:29:51 2017 +0200

    tests/run.sh: use temporary RC_FILE again (#1910)
    
    This was changed in ec9a981d for no good reason, and using a temporary
    file removes the requirement to restore it on exit.
    And it is necessary in case the original file is not writable (e.g. in
    case of a read-only Docker mount).

commit 07d561ee91dda6580c603ad3db09fe67b8130853
Author: Uli Schlachter <psychon@znc.in>
Date:   Sun Jul 9 19:00:16 2017 +0200

    wibox.widget.calendar: Stop using make_widget_declarative
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit d72893692e2c2dcce7d0c4897793dfd011c2554a
Author: Uli Schlachter <psychon@znc.in>
Date:   Sun Jul 9 18:59:17 2017 +0200

    calendar_popup: Fix method name entries
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit fc1ba35366166464486e02899ed5e86dd0e7d159
Author: Daniel Hahler <github@thequod.de>
Date:   Sun Jul 9 18:45:14 2017 +0200

    CMake: only run ldoc with changed input (#1911)
    
    This adds a custom command to build the documentation, where you can
    specify the generated output then. "ldoc" then depends on this output.
    
    This way "ldoc" is not being run every time, but only if the input files
    have changed.  ldoc's config is added therefore to the list of
    dependencies to make config changes trigger a rebuild.

commit 9519d666a37b7ddd69e4af995a69dfecf7b9740b
Author: Uli Schlachter <psychon@znc.in>
Date:   Sun Jul 9 18:36:04 2017 +0200

    calendar_popup: Fix style documentation
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1899
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 95b412df193b28583533ea87d67204544d1cecc2
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Sun Jul 9 16:23:56 2017 +0200

    Move project() call to CMakeLists.txt (#1909)
    
    CMake "fakes" a call to "project(Project C CXX)" if it does not see a
    project() call in CMakeLists.txt. Since we had this call in a different
    file, this default applied. This meant that CMake unnecessarily required
    a C++ compiler.
    
    Fix/work-around this by moving the call to project() into CMakeLists.txt
    
    Reference: https://github.com/awesomeWM/awesome/pull/1907#discussion_r125581273
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 2f105a405fbca4aa430b71332958efd106248d6f
Author: Daniel Hahler <github@thequod.de>
Date:   Sun Jul 9 14:17:35 2017 +0200

    Improve tests/run.sh (#1904)
    
    - add colors
    - count test files
    - display error summary
    - filter out a_dbus_connect warnings and "Test finished successfully." message
    - print current step with VERBOSE=1
    - kill clients at the end of tests in an extra step

commit ec51e3f9309a65be9fe74aa3fda9d8851d2b79ee
Author: Daniel Hahler <github@thequod.de>
Date:   Tue Jul 4 12:25:42 2017 +0200

    Makefile: remove `ln -s` for `awesome` (#1906)
    
    It does not seem to be required by tests (anymore), and fails when the
    source dir is mounted read-only (which is the case for the Docker based
    builds I am working on).
    
    I think it is clearer anyway to run it as `build/awesome`.

commit 30cbb0efe2f38da8f2a2f5d516822764d8a1ba33
Author: Daniel Hahler <github@thequod.de>
Date:   Tue Jul 4 10:17:12 2017 +0200

    Fix wrapper Makefile dependency on CMake outcome (#1905)
    
    If `cmake ..` in the build dir failed (e.g. because Lua could not be
    found), a subsequent `make` will cause a strange error (this is in
    non-quiet mode):
    
    ```
    /src/awesome # make
    echo "Running make Makefile…"
    Running make Makefile…
    make -C build Makefile
    make[1]: Entering directory '/src/awesome/build'
    make[1]: *** No rule to make target 'Makefile'.  Stop.
    make[1]: Leaving directory '/src/awesome/build'
    make: *** [Makefile:44: Makefile] Error 2
    ```
    
    With `s` in `MAKEFLAGS` (at the top of our Makefile):
    ```
    Running make check-unit…
    make[1]: *** No rule to make target 'check-unit'.  Stop.
    make: *** [Makefile:44: check-unit] Error 2
    ```
    
    Therefore this patch looks for build/Makefile to be generated really.

commit 9938fc8a05fb19d2d12111f6a239b75081131da7
Author: Daniel Hahler <github@thequod.de>
Date:   Mon Jul 3 21:28:13 2017 +0200

    spec/awful/completion_spec.lua: handle missing bash/zsh (#1889)
    
    Fixes https://github.com/awesomeWM/awesome/issues/1882.
    
    tests: spec/awful/completion_spec.lua: fix teardown for dirs
    
    Fixes https://github.com/awesomeWM/awesome/issues/1888.

commit 4eddfacf5121a8d51a329aea7dd500e022809c9e
Author: Daniel Hahler <github@thequod.de>
Date:   Mon Jul 3 19:26:10 2017 +0200

    lib/awful/completion.lua: handle missing SHELL environ var (#1897)

commit 4b4318602cafd72b5df6c87cbccdbc8eb38ff7bc
Author: Daniel Hahler <github@thequod.de>
Date:   Mon Jul 3 11:55:20 2017 +0200

    cmake: abort if Lua was not found (#1892)
    
    This will usually result in errors during linking, and the error message
    itself is not obvious to find.
    Therefore just abort in this case.

commit 0488905fccf3db45afbd63de74ec0a20316ed7b9
Author: actionless <actionless.loveless@gmail.com>
Date:   Mon Jul 3 01:01:03 2017 +0200

    fix(tests: screen-changes): take in account useless_gap

commit eb7c203f990f0b0f7c983bd552612baabfe1c237
Author: actionless <actionless.loveless@gmail.com>
Date:   Mon Jul 3 00:23:57 2017 +0200

    chore(travis): use `xresources` theme on one of the test targets

commit 718d91355d2aaaa2ca1e761a560dfbf6c239fbe7
Author: Daniel Hahler <github@thequod.de>
Date:   Sun Jul 2 23:25:04 2017 +0200

    tests: fix test-menubar for when there are no desktop files (#1898)

commit 5fdb2c629847a3c393fb211ce17d8b4eac02d35f
Author: actionless <actionless.loveless@gmail.com>
Date:   Sun Jul 2 19:36:26 2017 +0200

    feat(beatiful: theme_assets; themes: xresources): recolor titlebar icons for `hover` and `press` states

commit ab559a6f36a8683167be00020373e595ab748a33
Author: Uli Schlachter <psychon@znc.in>
Date:   Sun Jul 2 13:28:03 2017 +0200

    Provide better error message for unknown screen names
    
    The screen object can be indexed by strings to find a screen via some
    RANDR output name. However, if a string is used which does not
    correspond to a known output, the code just falls through to a function
    which will complain "string provided, userdata expected".
    
    This commit provides a slightly more useful error message instead.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit d4924988dffdf6e5dcba64318837219e2fd356a3
Author: Daniel Hahler <github@thequod.de>
Date:   Sun Jul 2 11:26:41 2017 +0200

    rules: switchtotag: fix usage of awful.tag.viewmore (#1895)
    
    This passes in the client's screen for now.
    
    In the long run this should get fixed via
    https://github.com/awesomeWM/awesome/issues/1883, but that is more
    involved.
    
    Fixes https://github.com/awesomeWM/awesome/issues/1886.

commit 719406ed5c54df0f58b78d11c4c8d600cd6540da
Author: Daniel Hahler <git@thequod.de>
Date:   Sat Jul 1 20:36:08 2017 +0200

    dbus.c: fix warning in a_dbus_connect

commit 7bc45a5c4e1f4c4e457f578a7598377b1290ac40
Author: Daniel Hahler <git@thequod.de>
Date:   Sat Jul 1 20:35:40 2017 +0200

    dbus.c: fix some comments, remove confusing ones

commit 09bffcd43293b58de52065462f285df3df0f6998
Author: Daniel Hahler <github@thequod.de>
Date:   Sat Jul 1 22:32:14 2017 +0200

    cmake: define check-unit always (#1896)
    
    Fixes https://github.com/awesomeWM/awesome/issues/1891.

commit 1cdd7ef86955670aa84e8a80596a9556311dce3f
Author: Daniel Hahler <github@thequod.de>
Date:   Sat Jul 1 14:15:12 2017 +0200

    Travis: use exit code 1 for failures, not errors (#1887)
    
    Using exit code != 1 (e.g. 2 as with "make") appears to cause Travis to
    consider the build job as an error ("!"), instead of a failure ("X").
    
    Example build: https://travis-ci.org/awesomeWM/awesome/builds/248484247
    
        !: https://travis-ci.org/awesomeWM/awesome/jobs/248484252
            Test finished successfully
            There were 3 errors!
            make[4]: *** [CMakeFiles/check-integration] Error 1
            make[3]: *** [CMakeFiles/check-integration.dir/all] Error 2
            make[2]: *** [CMakeFiles/check-integration.dir/rule] Error 2
            make[1]: *** [check-integration] Error 2
            make: *** [check-integration] Error 2
            ++return
    
        X: https://travis-ci.org/awesomeWM/awesome/jobs/248484250
            Test finished successfully
            There were 3 errors!

commit cbb8fd7ac408d229233a3b5490adf35d58a85d79
Author: morethanoneanimal <morethanoneanimal@users.noreply.github.com>
Date:   Wed Jun 28 15:11:07 2017 -0700

    Add naughty.destroy_all_notifications (#1871)
    
    Also updates connect_signal in naughty lib to use destroy_all_notifications().

commit b9d9587afa58784497c35889eb0510ac9ee7383c
Author: Uli Schlachter <psychon@znc.in>
Date:   Wed Jun 28 09:14:27 2017 +0200

    menubar: Produce better errors for broken .desktop files
    
    This now runs parse_desktop_file in a protected context so that a single
    broken desktop file does not break the whole menubar.
    
    Also, the error message that is produced when a Lua error occurs now
    also includes the file name of the .desktop file which we attempted to
    parse. This should help quite a lot in debugging.
    
    Related-to: https://github.com/awesomeWM/awesome/issues/1880
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 19fbae7f74ed13a3226375922b5f8dcaa5d9f019
Author: Uli Schlachter <psychon@znc.in>
Date:   Tue Jun 27 08:58:17 2017 +0200

    test-menubar.lua: Also skip the test with LuaJIT
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 914b4b7c8b3531a48e8b11b5102f8e6e36c049a1
Author: Uli Schlachter <psychon@znc.in>
Date:   Tue Jun 27 08:54:03 2017 +0200

    test-menubar.lua: Filter calls to gears.debug.print_error
    
    A test counts as having failed if it prints any error. However, the
    search path can very well contain non-existing directories which are not
    a problem. Thus, handle this by monkey-patching gears.debug.print_error.
    
    Ref: https://github.com/awesomeWM/awesome/pull/1872#issuecomment-311224439
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 3e305a72723cdb29c9561eb5113427816a25198e
Author: Daniel Hahler <git@thequod.de>
Date:   Sun Jun 25 17:10:59 2017 +0200

    minor: check textbox earlier, whitespace

commit 5dcd5969be5f4b6c5f8f8c7c8bc947ea2264a893
Author: Daniel Hahler <git@thequod.de>
Date:   Sat Jun 24 18:21:42 2017 +0200

    awful.prompt: fix Shift-Tab
    
    1. before this patch the "Shift" key(s) to get to Shift-Tab would reset
       ncomp already.
    2. "Shift-Tab" will come in as "Tab" with mod.Shift typically.
    3. cur_pos and ncomp have to get reset in case of going back to the
       original entry.

commit 0c97d1aa95484b7c8da95b9c4157f1b289ef83ca
Author: Daniel Hahler <git@thequod.de>
Date:   Tue Apr 18 00:05:06 2017 +0200

    Add spec/awful/completion_spec.lua

commit 4c792b49a977b8b4ae1830996e691e72235ce0ac
Author: Daniel Hahler <git@thequod.de>
Date:   Mon Apr 17 14:10:38 2017 +0200

    awful.completion: handle first word as command always
    
    This is necessary for `./*`, but should apply in general.
    It was changed in 3986409e, but there is no argument for it in the
    commit (message) really.

commit 2a69ffa374c1429e10f91aa80ceda06d6accbec4
Author: Daniel Hahler <git@thequod.de>
Date:   Mon Apr 17 13:28:40 2017 +0200

    awful.completion: zsh: fix command completion from PWD
    
    Fixes https://github.com/awesomeWM/awesome/issues/1734.

commit 956ac3c50db7c139086c7f4dd62ec6a1727d2008
Author: Daniel Hahler <git@thequod.de>
Date:   Tue Apr 18 00:05:33 2017 +0200

    awful.completion.shell: fix cur_pos return value

commit a6c36a4a2ee7df373c9efbf62842e8a3c8b5fcc2
Author: Daniel Hahler <github@thequod.de>
Date:   Mon Jun 26 22:44:08 2017 +0200

    awful.spawn: fix doc for spawn.easy_async{,_with_shell} (#1877)
    
    Using `@function` in 547c0e4b was wrong.

commit 3d1b2c2a5eb3585ee1377b7933a87299101d0959
Author: Tim Roes <github@timroes.de>
Date:   Mon Jun 26 21:21:09 2017 +0200

    Pass freedesktop hints to naughty.notify (#1875)

commit 547c0e4b834edd6d7ed9fa4985413c5702eb9229
Author: Luke Bonham <copycat-killer@users.noreply.github.com>
Date:   Mon Jun 26 21:15:58 2017 +0200

    awful.spawn: add easy_async_with_shell and fixed easy_async doc (#1541)

commit 9cd26cd2748987a8f9c599da5985025a17477f8b
Author: Daniel Hahler <github@thequod.de>
Date:   Mon Jun 26 20:40:56 2017 +0200

    doc: fix awful.completion.shell (#1866)

commit 82d1616773adf3172495b91aa9408989da3fde87
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Mon Jun 12 02:48:34 2017 -0400

    tests: Add tests for the stack layout

commit fb367c3f9e043021023f508a408aac47aaf56d74
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Mon Jun 12 02:48:00 2017 -0400

    stack: Add offset support

commit 29f70c1b4c07b413231cb7340be97c7f003ac520
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sun Jun 4 18:22:03 2017 -0400

    mirror: Fix documentation
    
    It didn't render properly

commit e49e7d6938ec59bee8d865bf874fd129a6c01b38
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Mon May 29 04:53:49 2017 -0400

    shims: Add a missing drawin member

commit 458340b4d46aebd68eac4f6d08a065fe4009d1df
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Mon Jun 5 01:47:05 2017 -0400

    doc: Add examples for the ratio layout

commit 0430f55257d6fb12c89a45719017b963e8018bb1
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Mon May 29 02:40:09 2017 -0400

    ratio: Add a fill strategy for empty entries
    
    This allows, for example, to imeplement the tag `master_fill_policy`
    and simplify the client layouts by not having to hardcode empty
    columns and rows in each layouts.

commit 731099ba4df31a10b360f50481b53145336d09ae
Author: Daniel Hahler <github@thequod.de>
Date:   Sun Jun 25 20:04:32 2017 +0200

    CMakeLists.txt: remove check-unit from ALL (#1867)
    
    This makes "make install" not run the unit tests (again).
    
    Instead "check-unit" is added to the top-level wrapper Makefile to be
    run for its "all" task.

commit d9631eac12f3b90378a59de01e632aa965378326
Author: Daniel Hahler <github@thequod.de>
Date:   Sun Jun 25 15:53:01 2017 +0200

    dbus.c: fix compiler warning (#1870)
    
    [ 57%] Building C object CMakeFiles/awesome.dir/dbus.c.o
        …/awesome/build/dbus.c: In function ‘a_dbus_message_iter’:
        …/awesome/build/dbus.c:137:27: warning: statement will never be executed [-Wswitch-unreachable]
                int datalen = 0;
                    ^~~~~~~
    
    It was changed in dd862007, but probably not intentional.

commit c9c02aef671c5e42f82394435295a1e664b549a8
Author: Uli Schlachter <psychon@znc.in>
Date:   Fri Jun 23 11:31:54 2017 +0200

    tests: Disable test-menubar.lua where needed
    
    This test runs into an lgi bug that causes awesome to segfault. Work
    around this by just disabling the test where needed.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 941c9973148a47e84ba551c4cb43771582c139a3
Author: Uli Schlachter <psychon@znc.in>
Date:   Wed Jun 14 09:41:30 2017 +0200

    tests: Add a very basic test for the menubar
    
    This does not actually test anything. It just makes sure that the code
    runs. A proper test still seems to need some time and some hacks, but
    this basic test is enough to check that the menubar does not cause any
    Lua errors.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 781e68aefc5230905ba857f51dee8e3dfc7c1568
Author: Uli Schlachter <psychon@znc.in>
Date:   Fri Jun 23 11:42:20 2017 +0200

    .travis.yml: Move EMPTY_THEME_WHILE_LOADING=1 to another build
    
    The combination of TEST_PREV_COMMITS=1 and EMPTY_THEME_WHILE_LOADING=1
    does not work. When trying to test the previous commits, the following
    error happens:
    
    error: Your local changes to the following files would be overwritten by
    checkout:
            lib/beautiful/init.lua
    
    This local modification was done by EMPTY_THEME_WHILE_LOADING=1.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 1f8b07d475671c3863a4dd68ba84f197ba6b7b27
Author: Emmanuel Lepage Vallée <elv1313@gmail.com>
Date:   Tue Jun 20 20:06:32 2017 -0400

    debug: Add a signal for deprecation warnings (#1832)
    
    Fixes #1612.

commit 10acd829688e78e0745c628b1a25f6aba9467b21
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Mon Jun 5 01:05:03 2017 -0400

    layoutbox: Use a textbox as the fallback when no images are found
    
    Fix #896

commit ca1247358464a0591aceced464de5d69526a5240
Author: Uli Schlachter <psychon@znc.in>
Date:   Tue Jun 20 10:05:32 2017 +0200

    Make beautiful.foo = bar work properly
    
    Without this, users would modify the beautiful table directly instead of
    the theme. This made a difference for code using beautiful.get() to get
    the theme.
    
    Reference: https://github.com/awesomeWM/awesome/pull/1854
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 20d15b8be6bbfc00d101d41da205e680e810207d
Author: Uli Schlachter <psychon@znc.in>
Date:   Tue Jun 20 09:42:45 2017 +0200

    awful.tag.new: Handle too few given layouts
    
    When awful.tag.new() got a list of layouts shorter than the list of
    names, it would previously create tags with nil as their layout. This
    commit changes this so that the first layout is repeated if necessary.
    
    Related-to: https://github.com/awesomeWM/awesome/issues/1853
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit de05ee6678554845486362de3c1f5444835a2b1a
Author: Uli Schlachter <psychon@znc.in>
Date:   Tue Jun 20 09:40:31 2017 +0200

    awful.layout: Apply layouts in a protected context
    
    If an error occurs while a layout is being applied, arrange_lock could
    get stuck at true, meaning that no more re-arranges will happen, thus
    breaking the whole layout machinery.
    
    Such errors could happen because the layout itself produces an error,
    but also because a width is too large and c:geometry() throws an error.
    Thus, this commit moves all of the actual "apply a layout"-code into a
    protected context.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1853
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 0829cc2d76b5af2702511a989275751e909f6437
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Mon Jun 19 19:45:38 2017 -0400

    notification: Fix `font` and use `beautiful` directly
    
    Using `beautiful.get()` has the drawback of not supporting theme
    variables set from `rc.lua`. It is also used less often than
    direct theme access, making it a bit inconsistent with how other
    modules behave.

commit f8a9b9891d73b895809b2e084d7442838b5d26df
Author: Tim Roes <github@timroes.de>
Date:   Thu Jun 15 18:47:48 2017 +0200

    Add missing awful.widget.common require (#1850)

commit b8956090d952c92ea1668739681c09ed6dbbb0a5
Author: Uli Schlachter <psychon@znc.in>
Date:   Wed Jun 14 14:49:51 2017 +0200

    Fix cyclic build dependency for 06-appearance.md.lua
    
    Previously this code checked the generated documentation to decide if
    something is a class or a module. Now, it parses the source file and
    looks for the @classmod, @module and @submodule tags to make the same
    decision.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1255
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 61229500a26bcf3def7a3cc09823263a85b478b9
Author: Uli Schlachter <psychon@znc.in>
Date:   Wed Jun 14 14:29:20 2017 +0200

    docs/06-appearance.md.lua: Add vim modeline
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 44dbb24570496db93dfadc1e80f15c70186b00c0
Author: SammysHP <sven@sammyshp.de>
Date:   Wed Jun 14 11:30:58 2017 +0200

    Fix documentation of activation filter
    
    Previously the `force` hint was described incorrectly.

commit f0368c21c5fe9587011b7facad0dee60e092fe30
Author: Uli Schlachter <psychon@znc.in>
Date:   Wed Jun 14 11:10:22 2017 +0200

    menubar.icon_theme: Never use nil as icon theme name
    
    The return value for this function is used as an index in a table and
    Lua does not like nil as an index.
    
    The function that actually looks for icons, find_icon_theme() already
    falls back to "hicolor" if it does not find anything via the current
    theme, so fix this issue by just falling back to "hicolor" here as well.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1819
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit ed230af9539d3be42e2e463c62cd3ce9aafb11f4
Author: SammysHP <sven@sammyshp.de>
Date:   Wed Jun 14 10:42:50 2017 +0200

    Fix documentation

commit d8412cb51d2b200d477508b48c73bf42b2309605
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Tue Jun 13 21:29:20 2017 +0200

    Re-add documentation of xproperty API (#1843)
    
    The documentation for awesome.register_xproperty, awesome.get_xproperty
    and awesome.set_xproperty were lost in commit 26f15a13f3c78babf1. This
    commit adds them back.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1817
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 26f150a66ceee852460d413e224cba130b83f0c9
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Tue Jun 13 14:43:44 2017 +0200

    Revert "Travis: pin lua-term to 0.4-1 to fix the Lua 5.3 build" (#1841)
    
    This reverts commit ce3e6648ac014463bcafeef60049476836a4961a. lua-term
    was fixed in the mean time, we just forgot to unpin it.

commit c5e830cd6031643eb8046c9f05145ad7a54f58ce
Author: Yauhen Kirylau <actionless.loveless@gmail.com>
Date:   Tue Jun 13 02:39:46 2017 +0200

    fix(awful: hotkeys_popup: keys): require all modules in init.lua

commit bcc3de469e6ae09489e1d6fb8bad4cdc0e1192cd
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Tue Jun 13 01:59:30 2017 +0200

    Fix menubar under Lua 5.1 (#1838)
    
    LGI's async support was trying to yield inside a protected call. Lua 5.1
    cannot do that. Work around this by reverting to the behaviour before
    commit 50cfa6c: Only call the callback in a protected context.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1837
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit d368cee8aa6e5ce94cdfda5a5bfec5c38cead5ca
Author: nahsi <nahsi@airmail.cc>
Date:   Mon Jun 12 18:53:32 2017 +0300

    hotkeys-popup: tmux hotkeys
    
    Closes https://github.com/awesomeWM/awesome/pull/1830.

commit 15d66167f725cbc841314e3e1c7da6b1ed4e4e74
Author: getzze <getzze@gmail.com>
Date:   Fri Mar 31 00:00:04 2017 +0100

    tests: Test the calendar widget

commit 39efa6bbf91e563906c1f2e8faf3182f0cba3cc9
Author: getzze <getzze@gmail.com>
Date:   Fri Mar 31 00:00:04 2017 +0100

    awful: Add a calendar popup widget

commit 5b0abb95416a47da750ddd0598c046ecddb400f3
Author: getzze <getzze@gmail.com>
Date:   Fri Mar 31 00:00:04 2017 +0100

    widget: Add a calendar widget

commit 212cb847827c4dc65dce05f360ce2e893b40e8de
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sun Jun 11 01:23:36 2017 -0400

    doc: Fix a taglist copy/paste oversaw
    
    Fix #1795

commit f2b77653557a34db95d266648c96cd508970b450
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sun Oct 9 01:33:08 2016 -0400

    tests: Test the `manual` layout.

commit 5d46d47ef79571daf963c4857ecfd58d061142df
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sun Oct 9 01:29:35 2016 -0400

    wibox.layout: Add a `manual` layout.
    
    A layout with manual widget positions. It is still useful as it is
    manager by the hierarchy and widget position can be functions.

commit 9e01c92ea220543163b11572acacf3344b76c49e
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sun Oct 9 01:32:31 2016 -0400

    tests: Minor changes to the wibox template.

commit 5d6d8043ec8039866ed4f057d7843f721369d48e
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sun Jun 11 00:11:29 2017 -0400

    quality: Remove trailing white spaces
    
    Fix #1129

commit 1839c4ecaa3f1af8c84ad1d84c4a21f5362ef914
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sat Jun 10 23:52:13 2017 -0400

    tag: Save history after the first iteration
    
    Fix #1651

commit 9c77aa58c592b77b5a2d4345009dc7b777be4caa
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sat Jun 10 23:44:12 2017 -0400

    rules: Replace switchtotag implementation with awful.tag.viewmore.
    
    Fix #1493

commit ffead7dcdab48310ff59cdcee0366014b680e6a5
Author: Simon Désaulniers <sim.desaulniers@gmail.com>
Date:   Sat Jun 10 18:10:42 2017 -0400

    hotkeys_popup: keys for qutebrowser (#1829)

commit 1a5d9d09fdf3b3649ff1802636c79feda5a95577
Author: Emmanuel Lepage Vallée <elv1313@gmail.com>
Date:   Fri Jun 9 05:21:49 2017 -0400

    wibar: Fix with width and height beautiful properties (#1826)
    
    There was code that always set the values. The fallback was never
    executed.
    
    Fix #1824

commit 3bb8efd2db6a786e838a7320729b8997dd537094
Author: Uli Schlachter <psychon@znc.in>
Date:   Fri Jun 9 10:13:14 2017 +0200

    Re-arrange the magnifier layout on focus changes
    
    Just re-arranging on every focus change would cause useless/needless
    re-arranges (which have no effect except to waste CPU time). Thus, this
    adds a special (undocumented) flag on layouts that makes sure that a
    rearrange occurs when the focus changes.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1799
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 9b991fb40b403c0a538d40eb4ce33a8c5f434b5d
Author: Uli Schlachter <psychon@znc.in>
Date:   Thu Jun 8 17:12:15 2017 +0200

    awful.menu: DPIfy the default menu size
    
    Related-to: https://github.com/awesomeWM/awesome/issues/1807
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit af5d6b683f1ac01ed5e957d2d2d8f3b4a3d72b64
Author: Uli Schlachter <psychon@znc.in>
Date:   Thu Jun 8 17:09:47 2017 +0200

    DPIfy all themes (mostly zenburn)
    
    This makes sure that all sizes that are specified in themes go through
    the dpi() function. For most themes this just means that the value 0 is
    DPIfied, which should not make much of a difference. However, for
    zenburn this actually adds the very first calls to dpi() to this theme.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1807
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit c8dc563ce12f4d20096ea7b78d7dd3382ef4c5e3
Author: Uli Schlachter <psychon@znc.in>
Date:   Thu Jun 8 16:59:51 2017 +0200

    Add tests for get_children of containers
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1672
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 72c2f06c019cd0f10f25ae3d62f15efebff6273e
Author: Uli Schlachter <psychon@znc.in>
Date:   Thu Jun 8 16:37:00 2017 +0200

    Add tests for get_children of layouts
    
    Partially-fixes: https://github.com/awesomeWM/awesome/issues/1672
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit ffca87563356b315943ad434dd043025b913c00a
Author: Caleb Maclennan <caleb@alerque.com>
Date:   Tue Jun 6 01:55:11 2017 +0300

    Add aweful.util.pread() so API docs have deprication notice (#1502)
    
    * Add awful.util.pread() so API docs have deprication notice
    
    * Update util.lua
    
    * Update util.lua
    
    * Update util.lua

commit af8288335b6431581f3c9295e1aa7b41b2892062
Author: Uli Schlachter <psychon@znc.in>
Date:   Fri Jun 2 16:10:36 2017 +0200

    Use command line instead of env for passing children
    
    Commit e54361a374d07743326 added code so that we pass the list of
    currently running children across restart via an environment variable.
    As Colin Walters correctly points out, setenv() is not safe in a
    multi-threaded processes.
    
    Thus, instead of using the environment, use the command line to pass
    this information along.
    
    https://github.com/awesomeWM/awesome/issues/1812
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit d799eea2cf54f311768bc78496417eb58abf9aef
Author: Uli Schlachter <psychon@znc.in>
Date:   Fri Jun 2 15:39:47 2017 +0200

    Restart by calling execvp() directly
    
    Before this, we used a_exec() with started a shell and used it to parse
    our glued-together command line. That only asks for escaping trouble
    (think: Path to the config file is given on the command line and
    contains a space), so use execvp() directly.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 84080c64c5c209be1e0fd0f5e515812db6b19309
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Fri Jun 2 10:13:26 2017 +0200

    spawn: Use CLOEXEC for pipes (#1811)
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1193#issuecomment-305705724
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 105638e920205d180876804be050560cfa62d112
Author: Daniel Hahler <github@thequod.de>
Date:   Thu Jun 1 21:27:53 2017 +0200

    client: update_implicitly_floating on manage (#1803)
    
    Ref: https://github.com/awesomeWM/awesome/pull/1748#issuecomment-304010490

commit e54361a374d0774332624f240f4b87d9a687bc39
Author: Uli Schlachter <psychon@znc.in>
Date:   Thu Jun 1 15:47:24 2017 +0200

    Reap children even across a restart
    
    In Unix, so that a process can learn about the exit status of the child
    processes that it started, children become zombie processes until the
    parents collects their exit information. We use glib both for starting
    and for collecting processes. However, when awesome is restarted, the
    new instance inherits children, but does not know about them and does
    not inherit them.
    
    Fix this by explicitly tracking a list of running child processes and by
    serialising them across a restart via an environment variable. The new
    awesome instance can then watch for these child processes, but besides
    that it ignores them and does not use their exit status in any way.
    
    Thanks to Colin Walters for the hint with serialising the list of processes.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1193
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit c172af947e5d48c6aa7a4e75e5bd9b31459877cf
Author: Åsmund Ervik <asmund.ervik@sintef.no>
Date:   Wed May 31 08:51:53 2017 +0200

    Updated porting tips with new section on how to obtain clean 3.5.9 and 4.0 rc.lua versions to diff existing config with / port into. Fixes issue #1576

commit 5f92eda6bf456115d3ecb48000667b6e0511a42b
Author: Uli Schlachter <psychon@znc.in>
Date:   Tue May 16 10:31:15 2017 +0200

    Makefile: Run cmake less often
    
    Previously, running make in the build/ directory depended on the "cmake"
    target which was running the cmake command. This target was phony,
    meaning that it was always considered to be out of date and needed to be
    re-generated.
    
    Change this so that instead things depend on the CMakeCache.txt file. If
    that file is already there, we do not re-run cmake.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 82b51c27156372eeee3938e138d4a809fe3093c7
Author: Uli Schlachter <psychon@znc.in>
Date:   Tue May 16 10:30:24 2017 +0200

    Makefile: Stop creating .build-* directories, use build directly
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 9bf50beab0b1337bf4088bdf7307a7c6f1c52b69
Author: Uli Schlachter <psychon@znc.in>
Date:   Tue May 16 10:20:30 2017 +0200

    Makefile: Add a hint that cmake can be used directly
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 801a1f0a89a754dd7806b1fcd3006b3b364936cc
Author: Uli Schlachter <psychon@znc.in>
Date:   Tue May 30 10:34:33 2017 +0200

    Deprecate widget-drawing functions in gears.surface
    
    This marks the functions gears.surface.widget_to_svg() and
    gears.surface.widget_to_surface() as deprecated in awesome 5. This means
    that by the time that awesome 6 becomes a thing, we can finally remove
    these...
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 0abfed54decf6e2dc5185f1697b2ea436f200017
Author: Uli Schlachter <psychon@znc.in>
Date:   Tue May 30 10:33:52 2017 +0200

    example tests: Switch to new API
    
    This makes the templates used by the example tests use the new API added
    in the previous commit.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 6de6419180dd7e833f452b93594d518227fa5301
Author: Uli Schlachter <psychon@znc.in>
Date:   Tue May 30 10:32:02 2017 +0200

    Add functions to draw widgets to a cairo surface
    
    These are supposed to eventually replace the already-existing functions
    in gears.surface which have a similar signature
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 0707f52ebf978f170bb9e70b0eca7c540826ce0b
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Tue May 30 10:28:44 2017 +0200

    Get rid of broken hint in the readme (#1801)
    
    luaL_dostring(L, s) is a macro that expands to
    luaL_loadstring(L,s)||lua_pcall(L,0,LUA_MULTRET,0). Then,
    lua_pcall(L,n,r,f) sometimes (since Lua 5.3?) is a macro that expands to
    lua_pcallk(L,n,r,f,0,NULL), but can sometimes also just be a function.
    
    Explaining all the above would make this section more complicated and
    apparently no one uses this hint anyway, because no one told us yet that
    this hint does not work.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit b5cdd06a7843dd45b44120ad8c5b5c0199d98426
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Mon May 29 20:08:56 2017 +0200

    Emit wallpaper_changed less often (#1800)
    
    Commit 222f0a133cb73a9 optimised the case where we change the wallpaper
    so that we can give the new wallpaper to Lua faster. However, contrary
    to what was intended, it also caused another wallpaper update later when
    the server told us that the wallpaper actually changed. This was because
    the juggling with multiple X11 connections went wrong.
    
    Fix this by using the right connection to actually change the wallpaper.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit e90f3ef25390d5dbf3d0dbf696c1876f71360842
Author: Uli Schlachter <psychon@znc.in>
Date:   Fri May 26 12:40:53 2017 +0200

    test-maximize.lua: Test all gravities
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 3e0eefe3bc239ffa3ffe39b9711f1068786b29cb
Author: Uli Schlachter <psychon@znc.in>
Date:   Fri May 26 12:32:04 2017 +0200

    Add a test case for some recent bug
    
    This test would have caught
    https://github.com/awesomeWM/awesome/issues/1607.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 08555a4fedaf5e759b798ef507c417ae35345c0b
Author: Uli Schlachter <psychon@znc.in>
Date:   Fri May 26 12:26:36 2017 +0200

    test-maximize: Restore old border width
    
    When the border width changes, we move the client according to its
    gravity. This can cause problems with the following code. Fix this by
    restoring the original border width again, which undoes the move.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 9016a9296fe3382063c4aea00e4a39778b707635
Author: ReVMatthias <matt.p24610@gmail.com>
Date:   Fri May 26 15:35:39 2017 +0200

    Fix comment typo in default config file (#1796)
    
    [ci skip]

commit e7a1745b868e66f68edea6cafc757aac71626e66
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Fri May 26 15:33:56 2017 +0200

    Fix Luacheck warnings (#1798)
    
    This fixes warnings that were introduced with f22ef5014d9566 /
    https://github.com/awesomeWM/awesome/pull/1477.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit ac8af660058992c2b8c51f08c0cfd261ab0a9444
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Thu May 25 04:40:45 2017 -0400

    beautiful: Save the theme path
    
    Fix #1508

commit c1bcad5f5e1d8911653cd3c84ba56aa16d74034d
Author: Haochen Tong <hexchain@users.noreply.github.com>
Date:   Wed May 24 18:22:13 2017 -0500

    parse_desktop_file: rtrim lines before parsing (#1677)

commit 27eba6c034fa4844cdc5272620ee3128862dec08
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Wed May 24 21:06:27 2017 +0200

    Abort on in-source-builds (#1788)
    
    They do not work since we overwrite things in such a way that the build
    will fail.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1786
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit f4e66bd24bc49808c9b9917453fef430ad4718d7
Author: Uli Schlachter <psychon@znc.in>
Date:   Wed May 24 10:06:24 2017 +0200

    Don't print warnings for non-existing xrdb values
    
    If needed, the Lua code can print a warning instead.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 5d944e3c1a3f0f41f17df47676c58e0c3a909f38
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sun May 14 16:46:33 2017 -0400

    tests: Add client self-resizing support to the tests

commit ae7b173c54c6f03d651e11b7632f0d625b195f0c
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sun May 14 16:45:50 2017 -0400

    tests: Add resizing support to the test client

commit 710039ed3f8f73f27d34cc4b92176484837fa82e
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sun Apr 23 04:50:45 2017 -0400

    tests: Test more maximization corner cases

commit 0eab45520e194895618250ff02ab93cbba195abd
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sun Apr 23 04:50:12 2017 -0400

    tests: Add maximization support to the test client
    
    Both a "before manage" and "later" mode.

commit 37d2654d5da537f2f8656bb2e1aa84b4a80f72e6
Author: BuildTools <wacossusca34@gmail.com>
Date:   Sat Feb 25 22:47:15 2017 -0800

    client: emit ewmh geometry requests as signals

commit 9bc46e4648a6ebf223005910ec64ae78f677d7f3
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Mon Apr 24 02:14:45 2017 -0400

    client: Honor the client maximization requests again
    
    This implementes the FIXME added a few commits ago. A new
    request::geometry handler turns client requests into normal
    lua `c.maximized = true` property changes.

commit b570e6d34783acf5a9408d73fcc67cfffce4491a
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sun Apr 23 04:49:15 2017 -0400

    client: Add request::geometry for client maximization
    
    This way the correct logic can be implented in Lua

commit 951386ec5c2dec13e452064cdef6e48630bae7d1
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sun Apr 23 04:05:00 2017 -0400

    client: Handle maximize differently at startup
    
    This way max_h+max_h wont happen by accident. This isn't pretty
    but it will get the job done.
    
    Fix #1599 #1559
    Close #1715 #1712

commit be29ee676882b98601ab5276f21cc50c191ebfe4
Author: Benoit de Chezelles <bew@users.noreply.github.com>
Date:   Tue May 23 15:37:46 2017 +0200

    naughty: avoid notification flickering on replace (#1785)
    
    Fixes https://github.com/awesomeWM/awesome/issues/1737.

commit 498510e81067c719234f194863a6df2073201b14
Author: Uli Schlachter <psychon@znc.in>
Date:   Sat May 13 12:08:40 2017 +0200

    Add a new disposition to _multi_screen.lua
    
    Without the previous commit, this would make test-awful-client.lua fail.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 1332288f9de1affaaad8d292816cdf1b17e645e7
Author: Uli Schlachter <psychon@znc.in>
Date:   Sat May 13 12:10:40 2017 +0200

    screen_client_moveto: Make sure client ends up on target screen
    
    This function tried to move the client to its new screen based on
    shifting around its current geometry. However, it assumed that the
    client was actually visible on its current screen, which is not always
    the case.
    
    Fix this by just forcing the client into its new screen if our moving
    approach does not work.
    
    This also reverts commit d5e365804ca7823799fbfc85691d12d39e52cd70 which
    is no longer necessary. This commit only hid the issue (partly).
    
    Fixes: https://github.com/awesomeWM/awesome/issues/318
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit c57208d1a820a9e11085844a00204e37a35a54cd
Author: Uli Schlachter <psychon@znc.in>
Date:   Sat May 13 12:02:40 2017 +0200

    client_resize(): Stop trying to force on screen
    
    The code here made sure that clients were not moved outside of the root
    window. However, that's not enough, because clients can still end up
    inside the root window, but outside of anything that is visible in some
    output. Thus, just remove this.
    
    Related-to: https://github.com/awesomeWM/awesome/issues/318
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit c9bfd934e7ccaec4f3cfa7e72d9a0f795ba87b27
Author: Daniel Hahler <github@thequod.de>
Date:   Sun May 14 20:14:18 2017 +0200

    beautiful.load_font: handle font height of 0 (#1782)
    
    This might happen if no fonts are installed.  It now falls back to the
    size from the font description.

commit 2eef92a891a993547d655b814e5c28572ba98ec7
Author: Uli Schlachter <psychon@znc.in>
Date:   Sun May 14 10:10:03 2017 +0200

    test-maximize: Improve error messages
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit e7232c0dc274fd73b2a535849999ba10cc943063
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sun Feb 26 14:24:27 2017 -0500

    test: Use the test client in test-maximize

commit 2da1900d85ab678c182507277bf3a93dc09b197c
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sun Feb 26 14:20:08 2017 -0500

    tests: Add gravity to the test client

commit 40e9393d942aef4107e4c4ac5e34e06c51cae81a
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Sat May 13 23:32:28 2017 +0200

    awful.autofocus: Discriminate sticky clients (#1697)
    
    A relatively common problem with awesome is with mixing sticky clients
    and the focus history. Once a sticky client ever had the focus, it will
    always get the focus after a tag switch. This is because the focus
    history is global and the sticky client is always the most recently
    focused and currently visible client in the list.
    
    Work around this by discriminating sticky clients: First try to find a
    client to focus, but ignore sticky clients. When this does not find
    anything, try again, but this time also consider sticky clients.
    
    (Basically the same issue exists with clients that are on multiple tags,
    but I guess that one can be ignored.)
    
    Fixes: https://github.com/awesomeWM/awesome/issues/733
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit f22a69d54e667caad9236fe2155c62e138d7e0cc
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Sat May 13 23:31:14 2017 +0200

    Fix fullscreen clients with gravity != NorthWest (#1764)
    
    Once upon a time, 4b9584fdb14fc3 already fixed this problem: We have to
    set the border width to zero before applying the new geometry to the
    client, because changing the border width makes the client move
    according to its gravity.
    
    Then came e54387904b16e3 and made this code use awful.placement instead
    of just fullscreening the client itself (without explaining why in the
    commit message!). After this commit, the border width was just ignored
    and left as-is. This was then fixed in 0bf8bb6a64638dec0e (no idea which
    callback the commit message refers to, the old code was basically just
    c.border_width=0, c:geometry(screen_geo)). However, now the border width
    was again changed after the geometry and the bug that was fixed by
    4b9584fdb14fc3 was back.
    
    This commit fixes this regression again by making sure that the border
    width is set to zero before the geometry is set. This becomes slightly
    more complicated, because now it is also awful.placement's job to
    restore the old border width.
    
    This is why this commit adds a new option to awful.placement so that it
    sets the border width to zero after creating its memento of the old
    border width.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1607
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 3ed0be6d856765a4dd887fcd1ea290b4d3fd8308
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Sat May 13 23:28:45 2017 +0200

    Add a test for gravity handling (#1760)
    
    This adds a C program which tests if the window manager handles
    gravities correctly. This program is loosely based on metacity's
    test-gravity.c, but completely rewritten and this version does automatic
    tests instead of allowing the user to perform testing by hand.
    
    By having this as a self-contained C program, it is possible to compare
    awesome's behaviour with the behaviour of other WMs.
    
    In my testing, only metacity and awesome pass this test. This is not
    that much of a big surprise since awesome was fixed in
    https://github.com/awesomeWM/awesome/pull/505 to work correctly with
    metacity's test-gravity.c. However, I am surprised that e.g. Fluxbox
    gets this wrong.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit a33527a46cb7fa1f6ea76fecbe0d2ea6942bd3f1
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Sat May 13 23:25:48 2017 +0200

    Add signal property::size_hints to clients (#1768)
    
    This signal is already documented, but so far it did not exist.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1741
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 155c37e759e0175d88eae34ddc23877789b6ab4c
Author: Quentin Minster <laomaiweng@minster.io>
Date:   Sat May 13 23:25:09 2017 +0200

    Fix single layout not appearing in the keyboardlayout widget (#1771)
    
    Change indexing so that a keyboard map with a single group still gets
    displayed in awful's keyboardlayout widget.
    
    Signed-off-by: Quentin Minster <quentin@minster.io>

commit 01e61079c3bdf048ec10cab0c9e73aaac6ba6982
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Sat May 13 23:22:15 2017 +0200

    Add & use a non-fatal kind of assert() (#1779)
    
    Aborting the process is sometimes a bit harsh for a failed assertion.
    This adds a non-fatal assert() macro called "check()" and uses it in
    some places where we might be able to survive the error.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 0df1586f10461e078a27f69b0fd879587fc4094d
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Thu May 11 12:47:06 2017 -0400

    menu: Check if the client is still valid before accessing props
    
    Fix #1777

commit e1bad41fc884199d03d74572a07ad3181fb52b6a
Author: Uli Schlachter <psychon@znc.in>
Date:   Thu May 11 16:22:16 2017 +0200

    Always emit property::floating when needed
    
    There are some cases where a client's floating state "silently" changes.
    For example, a fullscreen client will be considered floating. However,
    even though c.floating changes its value in this case, we did not emit
    the property::floating signal.
    
    Fix this by explicitly tracking the "implicitly floating" state. When
    some property that influences this "implicitly floating" state changes,
    we update it and if a client which was not explicitly assigned a
    floating state observes a change in this value, property::floating is
    emitted.
    
    This was tested by running a terminal and two xeyes in a tag with a
    tiling layout where awful.ewmh was patched so that clients do not change
    their geometry when fullscreening or maximizing. It was observable that
    after this patch e.g. the titlebar and the tasklist update to show the
    floating state of the client which became implicitly floating due to
    being maximized.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1662
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 420d6551c6e8bcc6e82c95a883f3c18b87991c6e
Author: Uli Schlachter <psychon@znc.in>
Date:   Thu May 11 15:56:58 2017 +0200

    Fix a tiny typo
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 5e431d2fb10cb6ed7100941962e38a74b493edcc
Author: Thomas G <t_glaessle@gmx.de>
Date:   Sun May 7 18:01:35 2017 +0200

    Update notification size in `naughty.replace_text` (#1756)
    
    Fixes #1707

commit 07d0bcb7138422a1cf112004253c852e02d4e684
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Sun May 7 18:00:22 2017 +0200

    Stabilize awful.tooltip code coverage (#1773)
    
    For a while now we had our code coverage tools tell us that the coverage
    for one line of code fluctuated. Sometimes it was being executed and
    other times it was not. This is useless noise.
    
    I think what is happening here is that the coverage depends on the order
    of iteration over a table. Either the tooltip that is being created was
    first made visible and then it text changed, or things happened in the
    opposite order.
    
    Fix this by doing this by explicitly changing the tooltip's text while
    it is surely visible.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit bcf70f374070953f19cc6edd8fea2f6227f79606
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Sun May 7 17:59:53 2017 +0200

    Drop our use of iconv (#1772)
    
    We were only using this for tag names. This means we are assuming that
    everything is UTF8, but tag names are provided in the local locale and
    need to be translated into UTF8? That makes no sense, so just drop this.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1753
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit eba61df4efd69cb536570301399b0e29c4ec1ddf
Author: Uli Schlachter <psychon@znc.in>
Date:   Mon May 1 17:24:43 2017 +0200

    Also track coverage information for C code
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1364
    Closes: https://github.com/awesomeWM/awesome/pull/1766

commit 348df4ef7b3654930e64bed2ddd7a6ddcd678eda
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Thu May 4 14:30:59 2017 +0200

    Fix the LuaJIT Travis build (#1769)
    
    There's been a new LuaJIT version three days ago.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 0dbe8a344d9dc51e1887ec2e378e91b74bc309fd
Author: Uli Schlachter <psychon@znc.in>
Date:   Mon May 1 13:26:17 2017 +0200

    menubar.utils: Fix for invalid utf8 file names
    
    The previous commit made this code handle invalid directories correctly.
    However, it was still possible that we come across invalid file names
    for which :get_path() returns nil and then we assumed this was a file
    name.
    
    Fix this by silently ignoring such files.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit f958b6a023d51d4f5d79cbeb059bf753450a1c11
Author: Uli Schlachter <psychon@znc.in>
Date:   Mon May 1 13:23:05 2017 +0200

    menubar.utils: Don't switch between path and GFile
    
    Before this commit, the code always used GFile instances, then used
    get_path() for a recursive call and turned the path into a GFile
    instance again. This is not only inefficient, but also causes issues
    with directories with invalid utf8, because the get_path function
    returns nil in this case.
    
    Fix this by keeping things as a GFile all the time.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 50cfa6c1119e49290a8b6e65115bc1a1891f5dc6
Author: Uli Schlachter <psychon@znc.in>
Date:   Mon May 1 13:19:19 2017 +0200

    Run menubar.utils.parse_dir in protected context
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1761
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 74bb34ff0090f0fc125d7202bea6248955f2e027
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Mon Apr 24 03:10:03 2017 -0400

    wallpaper: Turn asserts into warning
    
    Regression in v4.1. It causes the `rc.lua` (and the fallback) to
    exit when the wallpaper is missing or something went wrong.
    
    In <= 4.0, the wallpaper wasn't loaded, but Awesome didn't "crash".
    
    There should be no asserts in the code called during the first
    event loop iteration.

commit 7481a6e6b870efc75ba346eb08abe9e97b5e6bd6
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Fri Apr 21 18:53:25 2017 +0200

    Fix recursive enterleave ignore (#1747)
    
    Every call to client_ignore_enterleave_events() must be paired with a
    following call to client_restore_enterleave_events(). In between these
    two calls, no other calls to client_ignore_enterleave_events() is
    allowed.
    
    The code in banning_refresh() sometimes broke these rules. This can
    happen because the code causes signals to be emitted and Lua code can do
    basically anything.
    
    Fix this by moving the calls into the called functions.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1746
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit ddf96897672f0c07fb06a4edd0f08e08d9c0e213
Author: Matt <matt@hallme.com>
Date:   Fri Apr 21 10:34:23 2017 -0400

    Add timezone option for textclock widget (#1743)
    
    Adds a third parameter "timezone" to the textclock widget that is
    optional. Defaults to local timezone if nil.
    
    Signed-off-by: Matt Harrison <matt@harrison.us.com>

commit 993ffef6668d272ff44d81c05dc9f0b5a62aae05
Author: Tim Roes <github@timroes.de>
Date:   Thu Apr 20 22:31:17 2017 +0200

    Add the ignore_suspend flag to naughty (#1729)
    
    Possible use-case could be a do-not-disturb mode where notifications
    should be suspended, but some notifications triggered directly by
    a user interaction (e.g. change of keyboard layout, etc.) should
    still be shown.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1728

commit c6c8f62e2d7502748d94ff7ad4a87b780536f225
Author: Daniel Hahler <github@thequod.de>
Date:   Wed Apr 19 10:03:47 2017 +0200

    doc: FAQ: fix/improve size_hints_honor section (#1740)

commit f533d0bfd8328135d347c874c5c5c36a72e671f7
Author: Daniel Hahler <github@thequod.de>
Date:   Tue Apr 18 15:40:57 2017 +0200

    doc: fix filesystem.make_parent_directories (#1739)

commit 59662bc971d63459c4df5a9575375b71d1698cb8
Author: getzze <getzze@gmail.com>
Date:   Fri Mar 31 23:56:20 2017 +0100

    wibox.widget.base: do not call set_children if children is nil

commit 0e9a0cdee94a6b32f5435ae632d23abf0fc76add
Author: getzze <getzze@gmail.com>
Date:   Fri Mar 31 23:55:25 2017 +0100

    doc: improve doc for creating new widget

commit f290ea8b12530c302868261a1f6c6b310f8ce8ea
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Tue Apr 18 14:39:43 2017 +0200

    Stop grabbing mouse buttons on frame windows (#1724)
    
    I failed to see the obvious. Thanks to mlen from IRC to make
    me look into i3's source code so that I can figure out the obvious.
    
    First, what is the problem? We want to be informed about mouse clicks on
    client windows, e.g. for client-to-focus. For this we have to grab mouse
    buttons on the client window, since only a single client at a time can
    ask for information about all mouse clicks (I think...) and that right
    is reserved for the actual application and not the WM.
    
    We also want to be informed about mouse clicks on the titlebar, so that
    clicking there actually does something (and also e.g. click-to-focus).
    Obviously, we can just grab mouse buttons on the titlebar as well.
    
    However, this causes lots of problems. The X11 window containing the
    titlebar is not just the size of the titlebar, but also includes all of
    the actual client window. This means that clicking into the client also
    activates our button grab on the titlebar. This, in turn, causes the
    input focus to briefly shift to the window for the titlebar. This shift
    of focus can be detected by clients and caused various issues.
    
    This fix is so obvious that I missed it. We don't have to grab buttons
    on the titlebar window. We can just use the "normal" event propagation
    without grabs there, i.e. we just include the event masks for button
    press and button release and get informed about all mouse events. In
    fact, we already have this event mask in place, so the whole use of
    grabs is redundant.
    
    That's what this commit does. It also partially reverts commit
    394ff06589676c which is where this unnecessary grabbing was introduced.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1479
    Fixes: https://github.com/awesomeWM/awesome/issues/1658
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit d3e113f997b74d770c2d24356eb3acdc65b1c59e
Author: paul-axe <me.roox@gmail.com>
Date:   Sat Apr 15 23:08:35 2017 +0300

    naughty: fix offset calculation for *_middle position (#1727)

commit 29aee713f3c78fc1584c5b9111d1a4e3c5e8ea77
Author: Uli Schlachter <psychon@znc.in>
Date:   Sat Apr 15 12:05:42 2017 +0200

    Remove most uses of XCB_CURRENT_TIME
    
    XCB_CURRENT_TIME really should be avoided as much as possible (see
    ICCCM).
    
    However, the screen, mousegrabber and keygrabber code have cases where
    they really want up-to-date information / want to activate a grab *now*.
    These cases are fine with XCB_CURRENT_TIME since they are not related to
    some events.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 148dc269a832d2b02cc50c7b1c742ca86c40489b
Author: Uli Schlachter <psychon@znc.in>
Date:   Sat Apr 15 12:04:57 2017 +0200

    xembed: Stop using XCB_CURRENT_TIME
    
    This changes the xembed code so that the caller passes in a timestamp
    that should be used instead of XCB_CURRENT_TIME.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 5d83eee16f6038e151e7d51dd613dbadfa19944c
Author: Uli Schlachter <psychon@znc.in>
Date:   Sat Apr 15 11:46:10 2017 +0200

    Initialize globalconf.timestamp at startup
    
    There are lots of places where ICCCM says that using CurrentTime for a
    timestamp is wrong. So, instead of having globalconf.timestamp
    initialized to CurrentTime, initialize it with a proper timestamp.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit a87387d9f3c8a58f4a6280acf2fab668f76f1508
Author: Daniel Hahler <github@thequod.de>
Date:   Mon Apr 10 21:57:12 2017 +0200

    doc fixes for awful.mouse.resize, awful.rules, awful.util (#1717)

commit 639d6decb43dac2f8a5a540fa881d55786efbf60
Author: Daniel Hahler <git@thequod.de>
Date:   Sun Apr 9 18:18:42 2017 +0200

    Travis: merge BUILD_APIDOC and DO_CHECKQA
    
    ldoc was not installed for the DO_CHECKQA build.
    
    This merges it with the BUILD_APIDOC build job, which is one of the
    faster ones; installing ldoc into the DO_COVERAGE=coveralls would slow
    that one down a lot.
    
    This also moves the two slowest builds (with coverage reporting) to the
    top, so they get started first.
    
    Fixes https://github.com/awesomeWM/awesome/issues/1710.
    Closes https://github.com/awesomeWM/awesome/pull/1716.

commit 4d0c9eb86e747c2749a86f68b6bda52a32e9658d
Author: Uli Schlachter <psychon@znc.in>
Date:   Sat Apr 8 11:02:53 2017 +0200

    Rename filesystem.mkdir to make_directories
    
    The longer name is a bit more self-explanatory. The plural is meant to
    indicate that this recursively creates missing parent directories and
    does not just try to create the single given target directory.
    
    Since filesystem.mkdir() is part of the v4.1 release, a deprecation stub
    is needed.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 87e69e867702eda70bdb0ee77a7aec8312c0dda1
Author: Uli Schlachter <psychon@znc.in>
Date:   Sat Apr 8 11:18:07 2017 +0200

    Add a header to hotkeys_popup.keys.firefox to make LDoc happy
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit f8678d39a4586906b0455250a5eb689556d9e39d
Author: Uli Schlachter <psychon@znc.in>
Date:   Sat Apr 8 11:15:03 2017 +0200

    Fix parameters docs in awful.hotkeys_popup.widget
    
    This fixes broken API docs introduced in commit c183588ba1b9ad0e77c.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit f1b78a6ff22d05398ea5a4c4fd759bd88ad641ff
Author: Uli Schlachter <psychon@znc.in>
Date:   Sun Apr 2 18:58:03 2017 +0200

    menubar: assert() that io.open() succeeds
    
    Improves-the-error-for: https://github.com/awesomeWM/awesome/issues/1663
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 48c15e4dfb5c695666e85ef26cdbf052b3f38a89
Author: Uli Schlachter <psychon@znc.in>
Date:   Sun Apr 2 18:56:24 2017 +0200

    g.fs.get_cache_dir: Ensure the dir exists
    
    This makes get_cache_dir() try to ensure the cache directory that it
    returns exists.
    
    Should-fix: https://github.com/awesomeWM/awesome/issues/1663
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 4bbedebea49180bdca2920cd4a206fb820efc6f1
Author: Uli Schlachter <psychon@znc.in>
Date:   Sun Apr 2 18:54:08 2017 +0200

    awful.prompt: Use g.filesystem.make_parent_dir()
    
    The changes should not actually make a difference. If creating the
    directory fails, the error will now be different, but that should be
    about it.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit b4b070785ff6a196298bec4067fcb3ca87a3b451
Author: Uli Schlachter <psychon@znc.in>
Date:   Sun Apr 2 18:52:23 2017 +0200

    Add gears.filesystem.make_parent_dir(path)
    
    Given a path, this function tries to recursively create parent
    directories.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit dc717af3add3439e045d634626f979e65ffc47e1
Author: Uli Schlachter <psychon@znc.in>
Date:   Sun Apr 2 18:46:54 2017 +0200

    gears.filesystem: Convert tabs to spaces
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit b3635a0101d36a2fd2ae9b47cdd813861b797af5
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Sat Apr 8 10:00:34 2017 +0200

    Make the output of the gears.object.signal example stable (#1703)
    
    Previously it would print a table which would include the memory
    location where the table was stored. Thus, this produces a different
    result on every build.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 8e70b71c9c866c8d6d99a460a4951310e7b0f4a2
Author: axujen <axujen@users.noreply.github.com>
Date:   Thu Apr 6 19:33:14 2017 +0100

    Fix imagebox:set_image not returning anything
    
    set_image should always return true or false according to the docs

commit 2bb07343c6893d29222c87785c063ea15b1e05b2
Author: Tomoya Tabuchi <t@tomoyat1.com>
Date:   Tue Apr 4 10:17:07 2017 +0900

    Add iconv library detection for FreeBSD by using code for macOS.
    
    The workaround for finding iconv on macOS is also necessary on FreeBSD,
    because libiconv needs to be explicitly linked against on this platform.

commit c183588ba1b9ad0e77cbe460c999aeb19e4b307a
Author: Jonathan <jonathan@tinypulse.com>
Date:   Mon Apr 3 12:07:30 2017 +0700

    Allow to add group rules to hotkeys_popup default instance

commit 4b0070ea881e8ba93c499130abc37f1fff5bb693
Author: Uli Schlachter <psychon@znc.in>
Date:   Sun Apr 2 19:32:18 2017 +0200

    Ignore MappingNotify events
    
    All we do with MappingNotify events is to print a warning. This is
    because the XKB protocol specification says (§12.4):
    
         Once a client requests XkbMapNotify events, the server stops
         sending it MappingNotify events to inform it of keyboard changes.
    
    However, as our test-keyboard-layout-changes.lua test shows, this is not
    actually what happens. Instead, we seem to be getting both XkbMapNotify
    and MappingNotify events.
    
    Thus, just drop this print-a-warning-code.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit e1b4f17e649617d9c8ff80df793c4c78798f7714
Author: Uli Schlachter <psychon@znc.in>
Date:   Sun Apr 2 18:20:48 2017 +0200

    awful.ewmh.add_activate_filter: Fix doc example
    
    I didn't actually test this, but at least this now looks like valid Lua
    code to me, so this is definitely an improvement.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 74fb39afbdb294299602bbc1c6ba7fc1fca14e34
Author: Kevin Zander <veratil@gmail.com>
Date:   Thu Mar 30 22:44:20 2017 -0500

    Remove deprecated calls in tests
    Change deprecated util.table call in lib/awful/widget/clienticon.lua to gears.table call

commit 6cb2e0fa8226887f84410f2f666659253e302212
Author: Kevin Zander <veratil@gmail.com>
Date:   Thu Mar 30 20:37:16 2017 -0500

    Fix some deprecated calls in code and docs
    Add missing newline in test runner

commit 26b2065c40565cc5618132c8c0020bb7cef4acb5
Author: getzze <getzze@gmail.com>
Date:   Fri Mar 31 00:25:04 2017 +0100

    Remove deprecated function call

commit 98b931c1a444dffd5f26948159eb27fe51ffe8b4
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Wed Mar 29 18:47:44 2017 +0200

    Fix travis package list (#1681)
    
    The entry "gtk+3.0" caused the following to happen:
    
      Note, selecting 'libcanberra-gtk3-0-dbg' for regex 'gtk+3.0'
      Note, selecting 'monodoc-gtk3.0-manual' for regex 'gtk+3.0'
      Note, selecting 'libgtk3.0-cil' for regex 'gtk+3.0'
      Note, selecting 'libavahi-ui-gtk3-0' for regex 'gtk+3.0'
      Note, selecting 'libwxgtk3.0-0-dbg' for regex 'gtk+3.0'
      Note, selecting 'libseed-gtk3-0' for regex 'gtk+3.0'
      Note, selecting 'libgtk3.0-cil-dev' for regex 'gtk+3.0'
      Note, selecting 'libcanberra-gtk3-0' for regex 'gtk+3.0'
      Note, selecting 'libinfgtk3-0.5-0' for regex 'gtk+3.0'
      Note, selecting 'libwxgtk3.0-0' for regex 'gtk+3.0'
      Note, selecting 'gir1.2-dbusmenu-gtk3-0.4' for regex 'gtk+3.0'
      Note, selecting 'libwxgtk3.0-dev' for regex 'gtk+3.0'
    
    This was clearly not intended. Fix this by using gir1.2-gtk-3.0 instead,
    which is what we actually want (GObject introspection data for GTK 3).
    
    This pretty much reverts commit 30a527fcfd1bdc5f4dce7c662d9647dacccf7b1.
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 2f652a1de91ade0873ae0ca2aa09a402ecb772d9
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Wed Mar 29 18:46:47 2017 +0200

    Speed up tests/run.sh on Travis (#1682)
    
    tests/run.sh waits for awesome to exit via tail's "--pid" option. This
    makes tail check once per second if the process still exists and if not,
    tail will exit. However, the default of "once per second" causes lots of
    wasted time for us.
    
    This commit adds the argument "-s 0.1" to tail which makes tail check
    once every 0.1 seconds. This commit changes the time that "tests/run.sh"
    runs on Travis from about 60 seconds to about 35 seconds, which is a big
    improvement.
    
    Closes: https://github.com/awesomeWM/awesome/issues/1374
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 9f3a6757e9d429462416f9502d2f67c4843d8e2c
Author: Uli Schlachter <psychon@znc.in>
Date:   Tue Mar 28 10:23:09 2017 +0200

    Asynchronously update the keyboard state
    
    When the keyboard layout is modified via xmodmap, each single "change"
    (line of input to xmodmap) causes an "the keyboard configuration
    changed"-event to be sent. Awesome reacted to each of these events by
    reloading the keyboard layout. Thus, awesome reloaded the keyboard
    layout a lot and appeared to freeze.
    
    Fix this by asynchronously update the keyboard state: When such an event
    comes in, instead of reloading things immediately, we set a flag which
    makes us update the state at the end of the main loop iteration. This
    means that many events still cause only a single (or at least few)
    re-quering of the layout. Thus, a lot of time is saved.
    
    This commit removes the argument to the (undocumented!) signal
    xkb::group_changed. Previously, the argument was the active group
    number. Since this argument was unused and I'm lazy, I just removed it.
    The alternative would be that it might be visible to Lua that some "the
    active group changed"-events are dropped.
    
    Fixes: https://github.com/awesomeWM/awesome/issues/1494
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 3bda88ff64c2368f402c62ddec2ea281afcbff5a
Author: Uli Schlachter <psychon@users.noreply.github.com>
Date:   Sun Mar 26 21:20:18 2017 +0200

    Remove obsolete entries from check_for_invalid_requires.lua (#1673)
    
    Most of the entries that are marked as "TODO: Get rid of these" were
    handled. wibox.layout.align:get_children() never worked (it always
    called a non-existent function), so we can easily fix this entry without
    introducing a regression.
    
    I opened https://github.com/awesomeWM/awesome/issues/1672 to track the
    underlying problem behind the broken :get_children() function (which is
    missing test coverage).
    
    Signed-off-by: Uli Schlachter <psychon@znc.in>

commit 06a7818c09b41d6147e0e0253bdbca3af4c549bc
Author: Emmanuel Lepage Vallée <elv1313@gmail.com>
Date:   Sat Mar 25 01:22:44 2017 -0400

    tests: Test imagebox:set_image(nil)

commit ffda3b0c4cd2812b3bcdcaba34ab64d882d137e4
Author: FireFish5000 <firefish5000@gmail.com>
Date:   Sat Mar 25 00:07:55 2017 -0500

    Add null check to set imagebox to blank state

commit ea2c9deb68da7aa7f5aef30facd7c0c078269399
Author: romildo <malaquias@gmail.com>
Date:   Fri Mar 17 21:14:58 2017 -0300

    menubar: consider XDG_HOME_DIR and XDG_DATA_DIRS
    
    The freedesktop specifications let desktop files be stored in
    different directories indicated by the environment variables
    XDG_DATA_HOME and XDG_DATA_DIRS.
    
    Only use the default value for these variables if the variables are
    not defined.
    
    This is important for systmes like NixOS which does not follow the LFS
    and installs files differently.

commit 62edc5a200ae9f0d65127ebf141d276e7c9a78ab
Author: romildo <malaquias@gmail.com>
Date:   Fri Mar 17 21:14:37 2017 -0300

    Add get_xdg_data_home and get_xdg_data_dirs functions to gears.filesystem

commit d22207386fd9015cba924a03ec7965c9f05fa8c6
Author: romildo <malaquias@gmail.com>
Date:   Fri Mar 17 21:13:27 2017 -0300

    Add map function to gears.table

commit 894c254c42817c9b9431f8861a087f240bfaf5f4
Author: romildo <malaquias@gmail.com>
Date:   Fri Mar 17 21:13:11 2017 -0300

    Add string split function to gears.string

commit 9aa801cc97266cd41e6d6b3887ca55b1b371520e
Author: Emmanuel Lepage Vallée <elv1313@gmail.com>
Date:   Sun Mar 19 16:28:38 2017 -0400

    doc: Add 2 missing tag singals

commit 32341b10917afe1f5f93cb3ae4afd77479ba5139
Author: Emmanuel Lepage Vallée <elv1313@gmail.com>
Date:   Sun Mar 19 16:06:22 2017 -0400

    doc: find_by_name: Fix the doc
    
    Swap the parameters the next time the API break / deprecation season is open.
    
    This is indeed confusing, as reported on IRC. The screen is *not* optional,
    `awful.tag.find_by_name(name)` wont work

commit 652a9f109d5c6d20ae3a9f3b4ce4fb2aaf7aae30
Author: Emmanuel Lepage Vallee <elv1313@gmail.com>
Date:   Sat Mar 18 15:26:04 2017 -0400

    Update the NEWS

commit f22ef5014d956629c7d90749c6b9b07d491264d1
Author: Giuseppe Bilotta <giuseppe.bilotta@gmail.com>
Date:   Wed Jan 25 21:34:48 2017 +0100

    Make beautiful fallback properly if Xft.dpi is missing
    
    As documented in
    <https://keithp.com/~keithp/talks/xtc2001/paper/xft.html#sec-editing>,
    the fallback value for Xft.dpi should be the vertical DPI reported by X.
    On Xorg, this will generally be 96, unless the user has overridden the
    value by either forcing Xorg to report the EDID-derived DPI, or by
    setting the DPI themselves (via configuration, command line, or xrandr).
    The 96 value is kept as ultimate fallback if anything goes wrong.

commit f7d82334662f2949aef46d6dec86ed172108b9fb
Author: Giuseppe Bilotta <giuseppe.bilotta@gmail.com>
Date:   Wed Jan 25 21:33:59 2017 +0100

    Add root.size_mm
    
    This function returns the (alleged) physical size of the root window.

commit c8bfbf5a3b2cf21308dff113d609f3a753bf771c
Author: Giuseppe Bilotta <giuseppe.bilotta@gmail.com>
Date:   Thu Jan 26 18:46:14 2017 +0100

    Update physical size on RRChangeNotifyEvent
    
    Xrandr provides new physical sizes in millimeters when sending a
    RRChangeNotifyEvent, either to preserve DPI when monitors are added, or
    to change DPI when a DPI change was requested. Keep track of the changes
    so that our DPI information is always fresh.
